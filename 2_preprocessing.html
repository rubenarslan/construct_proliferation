<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>A fragmented field: Preprocessing APA PsycTests</title>




  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="A fragmented field: Preprocessing APA PsycTests"/>
  <meta property="og:type" content="article"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="A fragmented field"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="A fragmented field: Preprocessing APA PsycTests"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title"]}},"value":[{"type":"character","attributes":{},"value":["Preprocessing APA PsycTests"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  hr.section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 0px;
  }


  d-byline {
    border-top: none;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
    border-top: none;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  /* tweak for Pandoc numbered line within distill */
  d-article pre.numberSource code > span {
      left: -2em;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // separator
    var separator = '<hr class="section-separator" style="clear: both"/>';
    // prepend separator above appendix
    $('.d-byline').before(separator);
    $('.d-article').before(separator);

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme, except when numbering line
    // in code chunk
    $('pre:not(.numberLines) code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        var author_name = front_matter.authors[i].author
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <style type="text/css">
  .distill-site-nav  {
    color: #000000;
    background-color: #FFA500;
  }

  </style>
  <!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="style.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Preprocessing APA PsycTests","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">A fragmented field</a>
<a href="index.html">Overview</a>
<a href="1_import.html">Import XML</a>
<a href="2_preprocessing.html">Preprocessing</a>
<a href="2_psycinfo_cleaning.html">Compare PsycInfo &amp; PsycTests</a>
<a href="4_proliferation.html">Proliferation plots</a>
</div>
<div class="nav-right">
<a href="https://github.com/rubenarslan/construct_proliferation" aria-label="">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Preprocessing APA PsycTests</h1>

<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->

</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#import-records_wide" id="toc-import-records_wide">import records_wide</a></li>
<li><a href="#complexity-of-columns" id="toc-complexity-of-columns">Complexity of columns</a>
<ul>
<li><a href="#hoist-variables-which-are-just-length-1-lists-to-turn-them-into-regular-characters" id="toc-hoist-variables-which-are-just-length-1-lists-to-turn-them-into-regular-characters">hoist variables which are just length 1 lists to turn them into regular characters</a></li>
</ul></li>
<li><a href="#extract-first-acronym" id="toc-extract-first-acronym">Extract first acronym</a></li>
<li><a href="#extract-source-citation-doi" id="toc-extract-source-citation-doi">Extract source citation DOI</a></li>
<li><a href="#extract-cronbachs-alpha" id="toc-extract-cronbachs-alpha">Extract Cronbach’s Alpha</a></li>
<li><a href="#prevalences-of-validity-information" id="toc-prevalences-of-validity-information">Prevalences of validity information</a></li>
<li><a href="#sample-size" id="toc-sample-size">Sample size</a></li>
<li><a href="#number-of-factors" id="toc-number-of-factors">Number of factors</a></li>
<li><a href="#number-of-items" id="toc-number-of-items">Number of items</a></li>
<li><a href="#transform-to-psycinfo-ascii-names" id="toc-transform-to-psycinfo-ascii-names">Transform to PsycInfo ASCII names</a></li>
<li><a href="#simplify-lexically-identical" id="toc-simplify-lexically-identical">Simplify lexically identical</a></li>
<li><a href="#get-original-test-for-revisionstranslations" id="toc-get-original-test-for-revisionstranslations">Get original test for revisions/translations</a></li>
<li><a href="#get-basis-name-without-versionabbreviationlanguage" id="toc-get-basis-name-without-versionabbreviationlanguage">Get basis name without version/abbreviation/language</a></li>
<li><a href="#index-terms" id="toc-index-terms">Index terms</a></li>
<li><a href="#subdisciplines" id="toc-subdisciplines">Subdisciplines</a></li>
<li><a href="#save" id="toc-save">Save</a></li>
</ul>
</nav>
</div>
<p><a href="https://www.apa.org/pubs/databases/psyctests/field-guide" class="uri">https://www.apa.org/pubs/databases/psyctests/field-guide</a></p>
<h2 id="import-records_wide">import records_wide</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span>file <span class='op'>=</span> <span class='st'>"../sober_rubric/raw_data/records_wide.rda"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<h2 id="complexity-of-columns">Complexity of columns</h2>
<p>I wrote a little summary function to find columns which always consist only of a length 1 list with a single element. These can be losslessly translated to simple vectors.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>col_structures</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>1000</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='co'># looked only at 1000 to save time</span></span>
<span>  <span class='fu'>rowwise</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='co'># row wise is necessary to determine the length of the list in each row</span></span>
<span>  <span class='fu'>mutate_all</span><span class='op'>(</span><span class='op'>~</span> </span>
<span>               <span class='fu'>if_else</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>1</span>, </span>
<span>                       <span class='fu'>pluck_depth</span><span class='op'>(</span><span class='va'>.</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span>                       <span class='fu'>pluck_depth</span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>summarise_all</span><span class='op'>(</span><span class='va'>max</span><span class='op'>)</span> <span class='co'># take the maximum</span></span>
<span></span>
<span><span class='co'># fetch all "simple" columns</span></span>
<span><span class='va'>col_structures</span> <span class='op'>%&gt;%</span> <span class='fu'>pivot_longer</span><span class='op'>(</span><span class='fu'>everything</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>value</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span>sep <span class='op'>=</span> <span class='st'>"\n"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>DOI
Name
Purpose
Description
InstrumentType
Format
SupportingDocumentationLink
Commercial
Permissions
Fee
TestYear
TestItemsAvailable
Reliability
Validity
FactorAnalysis
NumberOfTestItems
TestReleaseDate
TestCorrectionDate
FactorsAndSubscales</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># fetch all non-simple columns</span></span>
<span><span class='va'>col_structures</span> <span class='op'>%&gt;%</span> <span class='fu'>pivot_longer</span><span class='op'>(</span><span class='fu'>everything</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>value</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span>sep <span class='op'>=</span> <span class='st'>"\n"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>TestTypeList
OtherVersionList
AcronymList
AuthorList
LanguagePresentList
LanguageAvailabilityList
SupportingDocumentationList
ConstructList
TestFileList
ClassificationList
MethodologyList
AdministrationMethodList
AgeGroupList
PopulationGroupList
OtherPopulationDetailsList
KeyWordList
IndexTermList
SourceCitationList
InstitutionalAuthorList
Correspondence
WebsiteList
AlternateNameList
TestLocationList
PublisherList</code></pre>
</div>
<h3 id="hoist-variables-which-are-just-length-1-lists-to-turn-them-into-regular-characters">hoist variables which are just length 1 lists to turn them into regular characters</h3>
<p>Simplify all the simple list columns to character columns.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>DOI</span>, DOI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Name</span>, Name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Purpose</span>, Purpose <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Description</span>, Description <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>InstrumentType</span>, InstrumentType <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Format</span>, Format <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>SupportingDocumentationLink</span>, SupportingDocumentationLink <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Commercial</span>, Commercial <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Permissions</span>, Permissions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Fee</span>, Fee <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>TestYear</span>, TestYear <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>TestItemsAvailable</span>, TestItemsAvailable <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Reliability</span>, Reliability <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>Validity</span>, Validity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>FactorAnalysis</span>, FactorAnalysis <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>NumberOfTestItems</span>, NumberOfTestItems <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>TestReleaseDate</span>, TestReleaseDate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>TestCorrectionDate</span>, TestCorrectionDate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>FactorsAndSubscales</span>, FactorsAndSubscales <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Reliability</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Reliability</span>, <span class='st'>"[[:space:]]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Validity</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Validity</span>, <span class='st'>"[[:space:]]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorAnalysis</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorAnalysis</span>, <span class='st'>"[[:space:]]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorsAndSubscales</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorsAndSubscales</span>, <span class='st'>"[[:space:]]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>instrument_types</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>InstrumentType <span class='op'>=</span> </span>
<span>                             <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Inventory/Questionnaire"</span>, <span class='st'>"Rating Scale"</span>, <span class='st'>"Test"</span>, <span class='st'>"Battery"</span>, </span>
<span>                               <span class='st'>"Index/Indicator"</span>, <span class='st'>"Survey"</span>, <span class='st'>"Screener"</span>, <span class='st'>"Task"</span>, <span class='st'>"Checklist"</span>, </span>
<span>                               <span class='st'>"Interview Schedule/Guide"</span>, <span class='st'>"Diary"</span>, <span class='st'>"Coding Scheme"</span>, <span class='st'>"Projective Measure"</span>, </span>
<span>                               <span class='st'>"Q Sort"</span>, <span class='st'>"Vignette/Scenario"</span><span class='op'>)</span>,</span>
<span>                           instrument_type_broad <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"questionnaire"</span>, <span class='st'>"questionnaire"</span>, <span class='st'>"test"</span>, <span class='st'>"test"</span>,</span>
<span>                                                     <span class='st'>"questionnaire"</span>, <span class='st'>"questionnaire"</span>, <span class='st'>"questionnaire"</span>, <span class='st'>"task"</span>, <span class='st'>"other-rating"</span>,</span>
<span>                                                     <span class='st'>"other-rating"</span>, <span class='st'>"questionnaire"</span>, <span class='st'>"other-rating"</span>, <span class='st'>"task"</span>,</span>
<span>                                                     <span class='st'>"questionnaire"</span>, <span class='st'>"questionnaire"</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>instrument_types</span>, by <span class='op'>=</span> <span class='st'>"InstrumentType"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>rowwise</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>classifications_n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>ClassificationList</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>ClassificationList</span>, classification_1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>ClassificationList</span>, classification_2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>classification_1 <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>classification_1</span>, <span class='st'>"[:space:]+"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>         classification_2 <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>classification_2</span>, <span class='st'>"[:space:]+"</span>, <span class='st'>" "</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>TestYear <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>TestYear</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<p>Set binary fields for “commercial” and “open”.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>commercial_bin <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span></span>
<span>    <span class='va'>Commercial</span> <span class='op'>==</span> <span class='st'>"Yes"</span> <span class='op'>~</span> <span class='fl'>1L</span>,</span>
<span>    <span class='va'>Commercial</span> <span class='op'>==</span> <span class='st'>"No"</span> <span class='op'>~</span> <span class='fl'>0L</span>,</span>
<span>    <span class='va'>Commercial</span> <span class='op'>==</span> <span class='st'>"Unknown"</span> <span class='op'>~</span> <span class='cn'>NA_integer_</span></span>
<span>  <span class='op'>)</span>,</span>
<span>  open_bin <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span></span>
<span>    <span class='va'>Permissions</span> <span class='op'>==</span> <span class='st'>"May use for Research/Teaching"</span> <span class='op'>~</span> <span class='fl'>1L</span>,</span>
<span>    <span class='va'>Permissions</span> <span class='op'>==</span> <span class='st'>"Not Specified"</span> <span class='op'>~</span>  <span class='cn'>NA_integer_</span>,</span>
<span>    <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='fl'>0L</span></span>
<span>  <span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<h2 id="extract-first-acronym">Extract first acronym</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>AcronymList</span>, first_acronym <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>ConstructList</span>, first_construct <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>first_construct</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>
               Coping Behavior              Life Satisfaction 
                            70                             71 
                    Creativity                    Religiosity 
                            72                             77 
                    Body Image                     Resilience 
                            78                             78 
                     Attitudes              Coping Strategies 
                            80                             81 
                       Empathy                   Intelligence 
                            81                             81 
                 Acculturation             Personality Traits 
                            83                             86 
            Consumer Attitudes               Job Satisfaction 
                            88                             96 
Health-Related Quality of Life                Quality of Life 
                           107                            108 
                Social Support                    Personality 
                           123                            140 
                       Anxiety                     Depression 
                           143                            156 </code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>acronym_base</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>first_acronym</span>, <span class='st'>"-R$"</span>, <span class='st'>""</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>acronym_base</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 19909</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>acronym_base</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>acronym_base</span>, <span class='st'>"--.+$"</span>, <span class='st'>""</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>acronym_base</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 19839</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>acronym_base</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>first_acronym</span>, <span class='st'>"--.+$"</span>, <span class='st'>""</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>acronym_base</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 20137</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>acronym_base</span> <span class='op'>&lt;-</span> <span class='va'>acronym_base</span></span></code></pre>
</div>
</details>
</div>
<h2 id="extract-source-citation-doi">Extract source citation DOI</h2>
<p>Extract the source citation DOI. I didn’t actually run this yet, want to do it with scopus where I can get citations by year.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide &lt;- records_wide %&gt;% </span></span>
<span><span class='co'>#   hoist(SourceCitationList, first_source_doi = list(1, "DOI", 1), .remove = FALSE)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># source_dois &lt;- records_wide %&gt;% select(first_source_doi) %&gt;% drop_na() %&gt;% distinct()</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># # commented out for now</span></span>
<span><span class='co'># # source_dois &lt;- rcrossref::cr_citation_count(source_dois$first_source_doi)</span></span>
<span><span class='co'># # records_wide &lt;- records_wide %&gt;% left_join(source_dois %&gt;% rename(first_source_doi = doi, citation_count_crossref = count), by = "first_source_doi")</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># library(rscopus)</span></span>
<span><span class='co'># scopus_api_key &lt;- "7804cba4fc15e860f8c5f549ac2215eb"</span></span>
<span><span class='co'># find_cit_scopus &lt;- function(x){</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># }</span></span>
<span><span class='co'># for (i in seq_along(nrow(source_dois))) {</span></span>
<span><span class='co'>#   find_cit_scopus(source_dois$first_source_doi[i])</span></span>
<span><span class='co'>#   if(i %% 10 == 0) print(i, source_dois$first_source_doi[i])</span></span>
<span><span class='co'># }</span></span>
<span><span class='co'># existing &lt;- readr::read_tsv("../sober_rubric/raw_data/scopus_citation_counts.tsv")</span></span>
<span><span class='co'># for (i in seq_along(setdiff(source_dois$first_source_doi, existing$doi))) {</span></span>
<span><span class='co'>#   x &lt;- source_dois$first_source_doi[i]</span></span>
<span><span class='co'>#   if(! x %in% existing$doi) {</span></span>
<span><span class='co'>#     s &lt;- generic_elsevier_api(api_key = scopus_api_key,</span></span>
<span><span class='co'>#                               doi = x,</span></span>
<span><span class='co'>#                               date = "1980-2023",</span></span>
<span><span class='co'>#                               type = "citations",</span></span>
<span><span class='co'>#                               search_type = "scopus")</span></span>
<span><span class='co'>#     citations &lt;- s$content$`abstract-citations-response`$citeColumnTotalXML$citeCountHeader$columnTotal %&gt;% as.data.frame()</span></span>
<span><span class='co'>#     if(length(citations)) {</span></span>
<span><span class='co'>#       colnames(citations) &lt;- s$content$`abstract-citations-response`$citeColumnTotalXML$citeCountHeader$columnHeading %&gt;% as.data.frame()</span></span>
<span><span class='co'>#       citations &lt;- pivot_longer(citations, everything(), names_to = "year", values_to = "citation_count", values_transform = as.numeric, names_transform = as.numeric)</span></span>
<span><span class='co'>#       citations$doi &lt;- x</span></span>
<span><span class='co'>#     } else {</span></span>
<span><span class='co'>#       citations &lt;- tibble(doi = x)</span></span>
<span><span class='co'>#     }</span></span>
<span><span class='co'>#     existing &lt;- bind_rows(existing, citations)</span></span>
<span><span class='co'>#     readr::write_tsv(existing, "../sober_rubric/raw_data/scopus_citation_counts.tsv")</span></span>
<span><span class='co'>#   }</span></span>
<span><span class='co'>#   if(i %% 10 == 0) { cat(paste(i, source_dois$first_source_doi[i])) }</span></span>
<span><span class='co'># }</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># records_wide &lt;- records_wide %&gt;% distinct() %&gt;% left_join(existing %&gt;% group_by(doi) %&gt;% summarise(citation_count = sum(citation_count, na.rm = T)), by = c("first_source_doi" = "doi"))</span></span></code></pre>
</div>
</details>
</div>
<h2 id="extract-cronbachs-alpha">Extract Cronbach’s Alpha</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>    no_reliability <span class='op'>=</span> <span class='va'>Reliability</span> <span class='op'>==</span> <span class='st'>"No reliability indicated."</span>,</span>
<span>         first_reliability_match <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'>str_match</span><span class='op'>(</span><span class='va'>Reliability</span>, <span class='st'>"(\\.\\d+)"</span><span class='op'>)</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span>         all_reliabilities <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'>str_extract_all</span><span class='op'>(</span><span class='va'>Reliability</span>, <span class='st'>"(\\.\\d+)"</span><span class='op'>)</span>, <span class='va'>as.numeric</span><span class='op'>)</span></span>
<span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<h2 id="prevalences-of-validity-information">Prevalences of validity information</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorAnalysis</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>
This is a unidimensional measure.     No factor analysis indicated. 
                               19                             45868 </code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>InstrumentType</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>summarise</span><span class='op'>(</span>Reliability <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>Reliability</span><span class='op'>!=</span><span class='st'>"No reliability indicated."</span><span class='op'>)</span>,</span>
<span>            FactorAnalysis <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>FactorAnalysis</span><span class='op'>!=</span><span class='st'>"No factor analysis indicated."</span> <span class='op'>&amp;</span> <span class='va'>FactorAnalysis</span> <span class='op'>!=</span> <span class='st'>"This is a unidimensional measure."</span><span class='op'>)</span>,</span>
<span>            Validity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>Validity</span><span class='op'>!=</span><span class='st'>"No validity indicated."</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>Reliability</span><span class='op'>+</span><span class='va'>FactorAnalysis</span><span class='op'>+</span><span class='va'>Validity</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span><span class='fu'>across</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>Reliability</span>, <span class='va'>FactorAnalysis</span>, <span class='va'>Validity</span><span class='op'>)</span>, <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fl'>100</span> <span class='op'>*</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code># A tibble: 16 × 4
   InstrumentType           Reliability FactorAnalysis Validity
   &lt;chr&gt;                          &lt;dbl&gt;          &lt;dbl&gt;    &lt;dbl&gt;
 1 Interview Schedule/Guide          34              6       22
 2 Task                              44              6       31
 3 Diary                             45             14       27
 4 &lt;NA&gt;                              53              5       41
 5 Test                              64              4       31
 6 Q Sort                            39             29       34
 7 Survey                            50             23       31
 8 Vignette/Scenario                 63             22       28
 9 Checklist                         59             14       42
10 Projective Measure                61             16       45
11 Index/Indicator                   75             21       35
12 Coding Scheme                     87              9       36
13 Battery                           58             24       59
14 Rating Scale                      86             27       46
15 Screener                          70             34       78
16 Inventory/Questionnaire           82             56       60</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide %&gt;% group_by(classification_1) %&gt;% </span></span>
<span><span class='co'>#   summarise(Reliability = mean(Reliability!="No reliability indicated."),</span></span>
<span><span class='co'>#             FactorAnalysis = mean(FactorAnalysis!="No factor analysis indicated." &amp; FactorAnalysis != "This is a unidimensional measure."),</span></span>
<span><span class='co'>#             Validity = mean(Validity!="No validity indicated.")) %&gt;% arrange(Reliability+FactorAnalysis+Validity) %&gt;% View</span></span></code></pre>
</div>
</details>
</div>
<h2 id="sample-size">Sample size</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>samplesizes</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Reliability</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='fu'>regex</span><span class='op'>(</span><span class='st'>"\\bn ?= ?(\\d+)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='co'># samplesizes %&gt;% unlist() %&gt;% table() %&gt;% sort()</span></span>
<span><span class='va'>samplesizes</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 82</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>samplesizes</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 1048</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide$Reliability[- (samplesizes %&gt;% map_dbl(~ .[1]) %&gt;% is.na() %&gt;% which())]</span></span>
<span></span>
<span><span class='va'>samplesizes</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Validity</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='fu'>regex</span><span class='op'>(</span><span class='st'>"\\bn ?= ?(\\d+)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='co'># samplesizes %&gt;% unlist() %&gt;% table()</span></span>
<span><span class='va'>samplesizes</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 117</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide$Validity[- (samplesizes %&gt;% map_dbl(~ .[1]) %&gt;% is.na() %&gt;% which())]</span></span>
<span></span>
<span><span class='va'>samplesizes</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorAnalysis</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='fu'>regex</span><span class='op'>(</span><span class='st'>"\\bn ?= ?(\\d+)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='co'># samplesizes %&gt;% unlist() %&gt;% table()</span></span>
<span><span class='va'>samplesizes</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 303</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide$FactorAnalysis[- (samplesizes %&gt;% map_dbl(~ .[1]) %&gt;% is.na() %&gt;% which())]</span></span></code></pre>
</div>
</details>
</div>
<h2 id="number-of-factors">Number of factors</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors</span> <span class='op'>&lt;-</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorAnalysis</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"(\\d+)(-| )factor"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors_subscales</span> <span class='op'>&lt;-</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorsAndSubscales</span>, <span class='st'>";"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors_subscales</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>FactorsAndSubscales</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA_real_</span></span>
<span><span class='co'># records_wide$FactorsAndSubscales %&gt;% na.omit()</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>.
  29   32   35   38   41   45   70   83  120   22   24   28   40   33 
   1    1    1    1    1    1    1    1    1    2    2    2    2    3 
  20   21   19   17   16   18   15   13   14   12   11    9   10    8 
   4    5    8    9   10   16   23   29   39   59  100  114  125  234 
   7    1    6    5    4    2    3 
 330  368  542  875 1195 1331 1727 </code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors_subscales</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>.
  22   25   29   38   23   28   30   34   35   36   27   33   21   26 
   1    1    1    1    2    2    2    2    2    2    3    3    4    4 
  24   20   19   17   18   15   16   14   13   12   11   10    9    1 
   5    6    9   11   15   24   25   44   61   78  102  185  219  224 
   8    7    6    5    4    2    3 
 390  570  943 1297 1820 1849 2127 </code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>records_wide</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>number_of_factors_subscales</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_bar</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y<span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>, stat <span class='op'>=</span> <span class='st'>'count'</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>scale_x_continuous</span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<img src="2_preprocessing_files/figure-html5/unnamed-chunk-10-1.png" width="624" />
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors_subscales</span>, <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_factors</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>.</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>, use <span class='op'>=</span> <span class='st'>'p'</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 0.6284253</code></pre>
</div>
<h2 id="number-of-items">Number of items</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span> <span class='op'>&lt;-</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='st'>"[[:space:]]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='va'>item_numbers</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='fu'>regex</span><span class='op'>(</span><span class='st'>"(\\d+)( |-)(total |primary |main |final )?(item|question)s?( ?-?measure)?"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='co'># table(unlist(item_numbers))</span></span>
<span><span class='va'>consists_of_numbers</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='fu'>regex</span><span class='op'>(</span><span class='st'>"(comprises|consists of|contains|composed of|comprised of|) (\\d+)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>3</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>just_numbers</span> <span class='op'>&lt;-</span> <span class='fu'>str_match</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>,pattern <span class='op'>=</span> <span class='st'>"^(\\d+) ?$"</span><span class='op'>)</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>item_numbers</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] NA</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>numbers</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='st'>"(\\d+)( |-)?"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'>case_when</span><span class='op'>(</span></span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"single(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>1</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"one(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>1</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"two(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>2</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"three(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>3</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"four(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>4</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"five(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>5</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"six(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>6</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"seven(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>7</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eight(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>8</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"nine(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>9</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"ten(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>10</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eleven(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>11</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"twelve(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>12</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"thirteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>13</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"fourteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>14</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"fifteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>15</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"sixteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>16</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"seventeen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>17</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eighteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>18</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"nineteen(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>19</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"twenty(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>20</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"forty(-| )(item|question)"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>40</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"sex items"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>6</span>,</span>
<span>  <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='cn'>NA_real_</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>words_without_item</span> <span class='op'>&lt;-</span> <span class='fu'>case_when</span><span class='op'>(</span></span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"single"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>1</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"one"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>1</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"two"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>2</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"three"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>3</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"four"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>4</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"five"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>5</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"six"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>6</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"seven"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>7</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eight"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>8</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"nine"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>9</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"ten"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>10</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eleven"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>11</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"twelve"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>12</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"thirteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>13</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"fourteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>14</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"fifteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>15</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"sixteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>16</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"seventeen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>17</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"eighteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>18</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"nineteen"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>19</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"twenty"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>20</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"thirty"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>30</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"forty"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>40</span>,</span>
<span>  <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span>, <span class='fu'>regex</span><span class='op'>(</span><span class='st'>"fifty"</span>, ignore_case <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>50</span>,</span>
<span>  <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='cn'>NA_real_</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># table(words)</span></span>
<span><span class='co'># table(words_without_item[which(words_without_item!=words)])</span></span>
<span></span>
<span><span class='co'># records_wide$NumberOfTestItems[!is.na(words)]</span></span>
<span><span class='co'># records_wide$NumberOfTestItems[which(item_numbers %&gt;% map(~ .[1]) == 1192)]</span></span>
<span><span class='co'># records_wide$NumberOfTestItems[which(item_numbers %&gt;% map(~ length(.)) &gt; 1)]</span></span>
<span></span>
<span><span class='co'># table(records_wide$NumberOfTestItems) %&gt;% sort() %&gt;% tail(20)</span></span>
<span><span class='co'># records_wide$NumberOfTestItems[which(!is.na(numbers %&gt;% map(~ .[1])) &amp; </span></span>
<span><span class='co'>#                                        is.na(item_numbers %&gt;% map(~ .[1])) &amp; </span></span>
<span><span class='co'>#                                        is.na(consists_of_numbers %&gt;% map(~ .[1])) &amp;</span></span>
<span><span class='co'>#                                        is.na(just_numbers %&gt;% map(~ .[1])) &amp;</span></span>
<span><span class='co'>#                                        is.na(words)</span></span>
<span><span class='co'>#                                      )]</span></span>
<span></span>
<span><span class='co'># records_wide$NumberOfTestItems[which(!is.na(records_wide$NumberOfTestItems) &amp; is.na(numbers %&gt;% map(~ .[1])) &amp; is.na(item_numbers %&gt;% map(~ .[1])) &amp; is.na(words))]</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>numbers</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>qplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span><span class='fu'>scale_x_sqrt</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>30</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<img src="2_preprocessing_files/figure-html5/unnamed-chunk-11-1.png" width="624" />
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>good_guess</span> <span class='op'>&lt;-</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>just_numbers</span>, </span>
<span>                       <span class='va'>item_numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>.</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>, </span>
<span>                       <span class='va'>words</span><span class='op'>)</span></span>
<span><span class='va'>best_guess</span> <span class='op'>&lt;-</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>just_numbers</span>, </span>
<span>                       <span class='va'>item_numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>.</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>, </span>
<span>                       <span class='va'>words</span>, </span>
<span>                       <span class='va'>consists_of_numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>.</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span>                       <span class='va'>words_without_item</span>,</span>
<span>                       <span class='va'>numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>.</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/xtabs.html'>xtabs</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>best_guess</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>                 is.na(records_wide$NumberOfTestItems)
is.na(best_guess) FALSE  TRUE
            FALSE 67861     0
            TRUE    144  3687</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/stats/xtabs.html'>xtabs</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>good_guess</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NumberOfTestItems</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>                 is.na(records_wide$NumberOfTestItems)
is.na(good_guess) FALSE  TRUE
            FALSE 64079     0
            TRUE   3926  3687</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_test_items</span> <span class='op'>&lt;-</span> <span class='va'>good_guess</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_test_items_best_guess</span> <span class='op'>&lt;-</span> <span class='va'>best_guess</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_test_items_potential_subscales</span> <span class='op'>&lt;-</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>item_numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>consists_of_numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>numbers</span> <span class='op'>%&gt;%</span> <span class='fu'>map_dbl</span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span> </span>
<span><span class='co'># records_wide$NumberOfTestItems[which(!is.na(records_wide$NumberOfTestItems) &amp; is.na(best_guess))]</span></span>
<span><span class='fu'>qplot</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_test_items</span>,binwidth <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>xlim</span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>200</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<img src="2_preprocessing_files/figure-html5/unnamed-chunk-11-2.png" width="624" />
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># table(records_wide$number_of_test_items) %&gt;% sort()</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>first_reliability_match</span>, <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>number_of_test_items</span>, use <span class='op'>=</span> <span class='st'>'p'</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] -0.05919112</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>number_of_test_items</span> <span class='op'>&lt;=</span> <span class='fl'>40</span>, <span class='va'>number_of_test_items</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>number_of_test_items</span><span class='op'>)</span>, <span class='va'>first_reliability_match</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_pointrange</span><span class='op'>(</span>fun.data <span class='op'>=</span> <span class='st'>"mean_se"</span>, stat <span class='op'>=</span> <span class='st'>"summary"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<img src="2_preprocessing_files/figure-html5/unnamed-chunk-11-3.png" width="624" />
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>number_of_test_items</span> <span class='op'>&lt;=</span> <span class='fl'>40</span>, <span class='va'>number_of_test_items</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>number_of_test_items</span><span class='op'>)</span>, <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>first_reliability_match</span> <span class='op'>==</span> <span class='fl'>.70</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_pointrange</span><span class='op'>(</span>fun.data <span class='op'>=</span> <span class='st'>"mean_se"</span>, stat <span class='op'>=</span> <span class='st'>"summary"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<p><img src="2_preprocessing_files/figure-html5/unnamed-chunk-11-4.png" width="624" /></p>
</div>
<h2 id="transform-to-psycinfo-ascii-names">Transform to PsycInfo ASCII names</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NameOC</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>NameOC</span></span>
<span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span> <span class='op'>&lt;-</span> <span class='fu'>str_to_lower</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>  <span class='co'># psycinfo doesn't differentiate dashes</span></span>
<span>  <span class='co'># Name = Name_orig,</span></span>
<span>  <span class='co'># Name_orig = Name,</span></span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(–|—|─|－|－|─|-|‑|‑|-|–|—)"</span>, <span class='st'>"-"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"(’)"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"(\")"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"(“|”)"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"(  +)"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"( )"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"(\n)"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"ҫ"</span>, <span class='st'>"c"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"™"</span>, <span class='st'>"(TM)"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"©"</span>, <span class='st'>"(C)"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"®"</span>, <span class='st'>"(R)"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='fu'>stringi</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stringi/man/stri_trans_general.html'>stri_trans_general</a></span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"latin-ascii"</span><span class='op'>)</span>, <span class='va'>name_psycinfo</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"\\(TM\\)"</span>, <span class='st'>"™"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"\\(C\\)"</span>, <span class='st'>"©"</span><span class='op'>)</span>,</span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"\\(R\\)"</span>, <span class='st'>"®"</span><span class='op'>)</span>,</span>
<span>  <span class='co'># name_psycinfo = coalesce(iconv(name_psycinfo, to='ASCII//TRANSLIT//IGNORE'), name_psycinfo),</span></span>
<span>  name_psycinfo <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='st'>"[:space:]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>psycinfo_chars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>" "</span>, <span class='st'>"-"</span>, <span class='st'>","</span>, <span class='st'>";"</span>, <span class='st'>":"</span>, <span class='st'>"!"</span>, <span class='st'>"?"</span>, <span class='st'>"."</span>, <span class='st'>"'"</span>, <span class='st'>"("</span>, <span class='st'>")"</span>, <span class='st'>"["</span>, </span>
<span><span class='st'>"]"</span>, <span class='st'>"/"</span>, <span class='st'>"&amp;"</span>, <span class='st'>"©"</span>, <span class='st'>"®"</span>, <span class='st'>"+"</span>, <span class='st'>"&lt;"</span>, <span class='st'>"&gt;"</span>, <span class='st'>"−"</span>, <span class='st'>"0"</span>, <span class='st'>"1"</span>, <span class='st'>"2"</span>, </span>
<span><span class='st'>"3"</span>, <span class='st'>"4"</span>, <span class='st'>"5"</span>, <span class='st'>"6"</span>, <span class='st'>"7"</span>, <span class='st'>"8"</span>, <span class='st'>"9"</span>, <span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>, <span class='st'>"d"</span>, <span class='st'>"e"</span>, <span class='st'>"f"</span>, </span>
<span><span class='st'>"g"</span>, <span class='st'>"h"</span>, <span class='st'>"i"</span>, <span class='st'>"j"</span>, <span class='st'>"k"</span>, <span class='st'>"l"</span>, <span class='st'>"m"</span>, <span class='st'>"n"</span>, <span class='st'>"o"</span>, <span class='st'>"p"</span>, <span class='st'>"q"</span>, <span class='st'>"r"</span>, <span class='st'>"s"</span>, </span>
<span><span class='st'>"t"</span>, <span class='st'>"™"</span>, <span class='st'>"u"</span>, <span class='st'>"v"</span>, <span class='st'>"w"</span>, <span class='st'>"x"</span>, <span class='st'>"y"</span>, <span class='st'>"z"</span><span class='op'>)</span></span>
<span><span class='va'>psycinfo_chars_escaped</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>" "</span>, <span class='st'>"\\-"</span>, <span class='st'>","</span>, <span class='st'>";"</span>, <span class='st'>":"</span>, <span class='st'>"!"</span>, <span class='st'>"?"</span>, <span class='st'>"."</span>, <span class='st'>"'"</span>, <span class='st'>"("</span>, <span class='st'>")"</span>, <span class='st'>"\\["</span>, </span>
<span><span class='st'>"\\]"</span>, <span class='st'>"/"</span>, <span class='st'>"&amp;"</span>, <span class='st'>"©"</span>, <span class='st'>"®"</span>, <span class='st'>"+"</span>, <span class='st'>"&lt;"</span>, <span class='st'>"&gt;"</span>, <span class='st'>"−"</span>, <span class='st'>"0"</span>, <span class='st'>"1"</span>, <span class='st'>"2"</span>, </span>
<span><span class='st'>"3"</span>, <span class='st'>"4"</span>, <span class='st'>"5"</span>, <span class='st'>"6"</span>, <span class='st'>"7"</span>, <span class='st'>"8"</span>, <span class='st'>"9"</span>, <span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>, <span class='st'>"d"</span>, <span class='st'>"e"</span>, <span class='st'>"f"</span>, </span>
<span><span class='st'>"g"</span>, <span class='st'>"h"</span>, <span class='st'>"i"</span>, <span class='st'>"j"</span>, <span class='st'>"k"</span>, <span class='st'>"l"</span>, <span class='st'>"m"</span>, <span class='st'>"n"</span>, <span class='st'>"o"</span>, <span class='st'>"p"</span>, <span class='st'>"q"</span>, <span class='st'>"r"</span>, <span class='st'>"s"</span>, </span>
<span><span class='st'>"t"</span>, <span class='st'>"™"</span>, <span class='st'>"u"</span>, <span class='st'>"v"</span>, <span class='st'>"w"</span>, <span class='st'>"x"</span>, <span class='st'>"y"</span>, <span class='st'>"z"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>DOI</span>, <span class='va'>NameOC</span>, <span class='va'>Name</span>, <span class='va'>name_psycinfo</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>saveRDS</a></span><span class='op'>(</span><span class='st'>"../sober_rubric/raw_data/psycinfo_psyctests_names.rds"</span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>name_psycinfo</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'>n_distinct</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>name_psycinfo</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>name_psycinfo</span>, <span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 43</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide %&gt;% filter(Name != name_psycinfo, str_detect(name_psycinfo, regex(paste0("^[", paste0(psycinfo_chars_escaped, collapse = ""),"]+$"), ignore_case = T), negate = T)) %&gt;% select(DOI, Name, name_psycinfo) %&gt;% </span></span>
<span>  <span class='co'># mutate(notascii = str_extract_all(name_psycinfo, regex(paste0("^[", paste0(psycinfo_chars_escaped, collapse = ""),"]+$"), ignore_case = T))) %&gt;% </span></span>
<span>  <span class='co'># View</span></span>
<span></span>
<span><span class='co'>#merged_ebsco %&gt;% group_by(DOI) %&gt;% filter(n()&gt;1) %&gt;% ungroup() %&gt;% select(DOI) %&gt;% distinct() %&gt;% </span></span>
<span><span class='co'>#  inner_join(</span></span>
<span><span class='co'>#    records_wide %&gt;% filter(name_psycinfo != Name) %&gt;% select(DOI, NameOC, name_psycinfo, Name)) %&gt;% View</span></span></code></pre>
</div>
</details>
</div>
<h2 id="simplify-lexically-identical">Simplify lexically identical</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/dgrtwo/fuzzyjoin'>fuzzyjoin</a></span><span class='op'>)</span></span>
<span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>distinct</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>str_match_all</span><span class='op'>(</span><span class='st'>"([^a-zA-Z0-9 ])"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>.
\u0081 \u008f     －      ¡      «      »      [      ]      ′      = 
     2      2      2      2      2      2      2      2      2      2 
     ⁄      ─      ²      æ      ě      ﬀ      ﬂ      ô      ś      ů 
     2      2      2      2      2      2      2      2      2      2 
     б      ҫ      х      э       ‪       ̇      _      %      °      &lt; 
     2      2      2      2      4      4      4      4      4      4 
     &gt;      è      ï      ř      ß      ž      ο      в      г      й 
     4      4      4      4      4      4      4      4      4      4 
     м      у      ч      ь      я             @      ×      â      č 
     4      4      4      4      4      6      6      6      6      6 
     ò      õ      š      д      р      ‘      å      ø      п      ú 
     6      6      6      6      6      8      8      8      8     10 
     л      т      ц      #      ā      ş      е      к      !      ﬁ 
    10     10     10     12     12     12     12     12     14     14 
     ő      а      с       ⁠      +      н      ğ      ©      ê      ı 
    14     16     16     20     20     20     22     24     24     26 
     “      à      ñ      о      ”      и      ?      ‑      ®      ™ 
    28     28     28     28     30     30     44     50     56     56 
     ä      ö      ü      −      ã      í      ç      ‐      á      &amp; 
    60     72     82     88    100    106    150    154    156    158 
     &quot;      ó      é      .      (      )      :      /      –      ’ 
   170    270    318    424    478    478    706   1268   1374   1920 
     ;      —      &#39;      ,     \n      - 
  2014   2064   3592   4288  13604  79144 </code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>  <span class='co'># psycinfo doesn't differentiate dashes</span></span>
<span>  <span class='co'># Name = Name_orig,</span></span>
<span>  <span class='co'># Name_orig = Name,</span></span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(–|—|─|－|－|─|-|‑|‑|-|–|—)"</span>, <span class='st'>"-"</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(’)"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(\")"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(“|”)"</span>, <span class='st'>"'"</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(  +)"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"ҫ"</span>, <span class='st'>"c"</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"( )"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(\n)"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(™|©|®)"</span>, <span class='st'>""</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='fu'>stringi</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stringi/man/stri_trans_general.html'>stri_trans_general</a></span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"latin-ascii"</span><span class='op'>)</span>, <span class='va'>Name</span><span class='op'>)</span>,</span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"[:space:]+"</span>, <span class='st'>" "</span><span class='op'>)</span></span>
<span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/elbersb/tidylog/'>tidylog</a></span><span class='op'>)</span></span>
<span><span class='va'>crosswalk</span> <span class='op'>&lt;-</span> <span class='fu'>uk2us</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/uk2us/man/ukus_crosswalk.html'>ukus_crosswalk</a></span></span>
<span><span class='va'>crosswalk</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/setNames.html'>setNames</a></span><span class='op'>(</span><span class='va'>crosswalk</span><span class='op'>$</span><span class='va'>us</span>, <span class='va'>crosswalk</span><span class='op'>$</span><span class='va'>uk</span><span class='op'>)</span></span>
<span><span class='fu'>str_replace_all</span><span class='op'>(</span><span class='st'>"a labour baulk"</span>, <span class='va'>crosswalk</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] &quot;a labor balk&quot;</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>  Name <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='va'>crosswalk</span><span class='op'>)</span></span>
<span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>num_spelled</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span></span>
<span>  num <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span>,</span>
<span>  spelled <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"zero"</span>, <span class='st'>"one"</span>, <span class='st'>"two"</span>, <span class='st'>"three"</span>, <span class='st'>"four"</span>, <span class='st'>"five"</span>, <span class='st'>"six"</span>, <span class='st'>"seven"</span>, </span>
<span>              <span class='st'>"eight"</span>, <span class='st'>"nine"</span>, <span class='st'>"ten"</span>, <span class='st'>"eleven"</span>, <span class='st'>"twelve"</span>, <span class='st'>"thirteen"</span>, </span>
<span>              <span class='st'>"fourteen"</span>, <span class='st'>"fifteen"</span>, <span class='st'>"sixteen"</span>, <span class='st'>"seventeen"</span>, <span class='st'>"eighteen"</span>, </span>
<span>              <span class='st'>"nineteen"</span>, <span class='st'>"twenty"</span>, <span class='st'>"twenty one"</span>, <span class='st'>"twenty two"</span>, <span class='st'>"twenty three"</span>,</span>
<span>              <span class='st'>"twenty four"</span>, <span class='st'>"twenty five"</span>, <span class='st'>"twenty six"</span>, <span class='st'>"twenty seven"</span>,</span>
<span>              <span class='st'>"twenty eight"</span>, <span class='st'>"twenty nine"</span>, <span class='st'>"thirty"</span>, <span class='st'>"thirty one"</span>, <span class='st'>"thirty two"</span>,</span>
<span>              <span class='st'>"thirty three"</span>, <span class='st'>"thirty four"</span>, <span class='st'>"thirty five"</span>, <span class='st'>"thirty six"</span>,</span>
<span>              <span class='st'>"thirty seven"</span>, <span class='st'>"thirty eight"</span>, <span class='st'>"thirty nine"</span>, <span class='st'>"forty"</span>, <span class='st'>"forty one"</span>,</span>
<span>              <span class='st'>"forty two"</span>, <span class='st'>"forty three"</span>, <span class='st'>"forty four"</span>, <span class='st'>"forty five"</span>, <span class='st'>"forty six"</span>,</span>
<span>              <span class='st'>"forty seven"</span>, <span class='st'>"forty eight"</span>, <span class='st'>"forty nine"</span>, <span class='st'>"fifty"</span>, <span class='st'>"fifty one"</span>,</span>
<span>              <span class='st'>"fifty two"</span>, <span class='st'>"fifty three"</span>, <span class='st'>"fifty four"</span>, <span class='st'>"fifty five"</span>, <span class='st'>"fifty six"</span>,</span>
<span>              <span class='st'>"fifty seven"</span>, <span class='st'>"fifty eight"</span>, <span class='st'>"fifty nine"</span>, <span class='st'>"sixty"</span>, <span class='st'>"sixty one"</span>,</span>
<span>              <span class='st'>"sixty two"</span>, <span class='st'>"sixty three"</span>, <span class='st'>"sixty four"</span>, <span class='st'>"sixty five"</span>, <span class='st'>"sixty six"</span>,</span>
<span>              <span class='st'>"sixty seven"</span>, <span class='st'>"sixty eight"</span>, <span class='st'>"sixty nine"</span>, <span class='st'>"seventy"</span>, <span class='st'>"seventy one"</span>,</span>
<span>              <span class='st'>"seventy two"</span>, <span class='st'>"seventy three"</span>, <span class='st'>"seventy four"</span>, <span class='st'>"seventy five"</span>,</span>
<span>              <span class='st'>"seventy six"</span>, <span class='st'>"seventy seven"</span>, <span class='st'>"seventy eight"</span>, <span class='st'>"seventy nine"</span>,</span>
<span>              <span class='st'>"eighty"</span>, <span class='st'>"eighty one"</span>, <span class='st'>"eighty two"</span>, <span class='st'>"eighty three"</span>, <span class='st'>"eighty four"</span>,</span>
<span>              <span class='st'>"eighty five"</span>, <span class='st'>"eighty six"</span>, <span class='st'>"eighty seven"</span>, <span class='st'>"eighty eight"</span>, <span class='st'>"eighty nine"</span>,</span>
<span>              <span class='st'>"ninety"</span>, <span class='st'>"ninety one"</span>, <span class='st'>"ninety two"</span>, <span class='st'>"ninety three"</span>, <span class='st'>"ninety four"</span>,</span>
<span>              <span class='st'>"ninety five"</span>, <span class='st'>"ninety six"</span>, <span class='st'>"ninety seven"</span>, <span class='st'>"ninety eight"</span>, <span class='st'>"ninety nine"</span>, <span class='st'>"one hundred"</span><span class='op'>)</span></span>
<span><span class='op'>)</span> </span>
<span><span class='va'>roman_num_spelled</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>num <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"\\bii\\b"</span>, <span class='st'>"\\biii\\b"</span>, <span class='st'>" \\biv\\b"</span>, <span class='st'>"\\bv\\b"</span><span class='op'>)</span>, </span>
<span>                            spelled <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two"</span>, <span class='st'>"three"</span>, <span class='st'>"four"</span>, <span class='st'>"five"</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>num_spelled</span> <span class='op'>&lt;-</span> <span class='fu'>bind_rows</span><span class='op'>(</span><span class='va'>num_spelled</span>, <span class='va'>roman_num_spelled</span><span class='op'>)</span><span class='op'>%&gt;%</span> <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>num</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>replace_nums</span> <span class='op'>&lt;-</span> <span class='va'>num_spelled</span><span class='op'>$</span><span class='va'>spelled</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>replace_nums</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>num_spelled</span><span class='op'>$</span><span class='va'>num</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>  <span class='co'># shouldn't treat 12 as being close to 1</span></span>
<span>  Name_comparable <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name</span>, <span class='st'>"(-|,)"</span>, <span class='st'>" "</span><span class='op'>)</span>,</span>
<span>  Name_comparable <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>Name_comparable</span>, <span class='va'>replace_nums</span><span class='op'>)</span>,</span>
<span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<h2 id="get-original-test-for-revisionstranslations">Get original test for revisions/translations</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>get_original</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>your_list</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='kw'>if</span><span class='op'>(</span><span class='fu'>is_empty</span><span class='op'>(</span><span class='va'>your_list</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>    <span class='cn'>NA_character_</span></span>
<span>  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>    <span class='va'>versions</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>OtherVersion <span class='op'>=</span> <span class='va'>your_list</span><span class='op'>)</span></span>
<span>    <span class='va'>versions</span> <span class='op'>&lt;-</span> <span class='va'>versions</span> <span class='op'>%&gt;%</span></span>
<span>      <span class='fu'>unnest_wider</span><span class='op'>(</span><span class='va'>OtherVersion</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>      <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>        OtherVersionTestName <span class='op'>=</span> <span class='fu'>map_chr</span><span class='op'>(</span><span class='va'>OtherVersionTestName</span>, <span class='op'>~</span><span class='va'>.x</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span>        OtherVersionType <span class='op'>=</span> <span class='fu'>map_chr</span><span class='op'>(</span><span class='va'>OtherVersionTypeList</span>, <span class='op'>~</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>OtherVersionType</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span></span>
<span>      <span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>      <span class='fu'>select</span><span class='op'>(</span><span class='va'>OtherVersionTestName</span>, <span class='va'>OtherVersionType</span><span class='op'>)</span></span>
<span>    </span>
<span>    <span class='va'>versions</span> <span class='op'>&lt;-</span> <span class='va'>versions</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>filter</span><span class='op'>(</span><span class='va'>OtherVersionType</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span></span>
<span>    </span>
<span>    <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>versions</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span> </span>
<span>      <span class='cn'>NA_character_</span> </span>
<span>    <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>      <span class='va'>versions</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>OtherVersionTestName</span><span class='op'>)</span></span>
<span>      <span class='op'>}</span> </span>
<span>  <span class='op'>}</span></span>
<span><span class='op'>}</span></span>
<span><span class='co'># debug(get_original)</span></span>
<span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>OtherVersionList</span>, original_name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>, .transform <span class='op'>=</span> </span>
<span>          <span class='va'>get_original</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>get_original_doi</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>your_list</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='kw'>if</span><span class='op'>(</span><span class='fu'>is_empty</span><span class='op'>(</span><span class='va'>your_list</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>    <span class='cn'>NA_character_</span></span>
<span>  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>    <span class='va'>versions</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>OtherVersion <span class='op'>=</span> <span class='va'>your_list</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>rowwise</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>mutate</span><span class='op'>(</span>OtherVersionID <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>OtherVersion</span>, <span class='st'>"OtherVersionTestID"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>unnest_wider</span><span class='op'>(</span><span class='va'>OtherVersion</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>      <span class='fu'>mutate</span><span class='op'>(</span></span>
<span>        OtherVersionTestName <span class='op'>=</span> <span class='fu'>map_chr</span><span class='op'>(</span><span class='va'>OtherVersionTestName</span>, <span class='op'>~</span><span class='va'>.x</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span>        OtherVersionType <span class='op'>=</span> <span class='fu'>map_chr</span><span class='op'>(</span><span class='va'>OtherVersionTypeList</span>, <span class='op'>~</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>OtherVersionType</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span></span>
<span>      <span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>      <span class='fu'>select</span><span class='op'>(</span><span class='va'>OtherVersionID</span>, <span class='va'>OtherVersionTestName</span>, <span class='va'>OtherVersionType</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>mutate</span><span class='op'>(</span>OtherVersionDOI <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>OtherVersionID</span>, <span class='st'>"9999-"</span>, <span class='st'>"10.1037/t"</span><span class='op'>)</span><span class='op'>)</span></span>
<span>    </span>
<span>    <span class='va'>versions</span> <span class='op'>&lt;-</span> <span class='va'>versions</span> <span class='op'>%&gt;%</span> </span>
<span>      <span class='fu'>filter</span><span class='op'>(</span><span class='va'>OtherVersionType</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span></span>
<span>    </span>
<span>    <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>versions</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span> </span>
<span>      <span class='cn'>NA_character_</span> </span>
<span>    <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>      <span class='va'>versions</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>OtherVersionDOI</span><span class='op'>)</span></span>
<span>      <span class='op'>}</span> </span>
<span>  <span class='op'>}</span></span>
<span><span class='op'>}</span></span>
<span><span class='co'># debug(get_original)</span></span>
<span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>OtherVersionList</span>, original_DOI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>, .transform <span class='op'>=</span> </span>
<span>          <span class='va'>get_original_doi</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>original_DOI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>original_DOI</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='co'># hoist(original_DOI, original_DOI = list(1)) %&gt;% </span></span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>original_test_DOI <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>original_DOI</span>, <span class='va'>DOI</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>hoist</span><span class='op'>(</span><span class='va'>TestTypeList</span>, test_type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, .remove <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/xtabs.html'>xtabs</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>original_DOI</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>test_type</span>, <span class='va'>records_wide</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>                   test_type
is.na(original_DOI) Original Revision Subtest Translation
              FALSE        0     4453      19        5187
              TRUE     43478     5028      13        2735</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>n_distinct</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>original_test_DOI</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 62037</code></pre>
</div>
<h2 id="get-basis-name-without-versionabbreviationlanguage">Get basis name without version/abbreviation/language</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name_base</span> <span class='op'>&lt;-</span> <span class='fu'>get_name_base</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span><span class='op'>)</span></span>
<span><span class='co'># reduction</span></span>
<span><span class='fu'>n_distinct</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>-</span> <span class='fu'>n_distinct</span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>Name_base</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 9069</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='va'>Name</span> <span class='op'>!=</span> <span class='va'>Name_base</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 16670</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>test_type</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>summarise</span><span class='op'>(</span>mismatch <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Name</span> <span class='op'>!=</span> <span class='va'>Name_base</span><span class='op'>)</span><span class='op'>/</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span>, match <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Name</span> <span class='op'>==</span> <span class='va'>Name_base</span><span class='op'>)</span><span class='op'>/</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code># A tibble: 5 × 3
  test_type   mismatch  match
  &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
1 Original      0.0570 0.943 
2 Revision      0.549  0.451 
3 Subtest       0.625  0.375 
4 Translation   0.966  0.0336
5 &lt;NA&gt;          0.121  0.879 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># records_wide %&gt;% filter(test_type != "Original", is.na(original_DOI)) %&gt;% select(DOI, Name_base, Name) %&gt;% </span></span>
<span><span class='co'>#   left_join(records_wide %&gt;% filter(test_type == "Original") %&gt;% select(Name_base = Name, original_DOI_by_name = DOI), by = "Name_base") %&gt;% View</span></span>
<span></span>
<span><span class='va'>matches_by_doi</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>original_DOI</span>, <span class='va'>Name</span>, <span class='va'>Name_base</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>               <span class='fu'>select</span><span class='op'>(</span>original_DOI <span class='op'>=</span> <span class='va'>DOI</span>, original_name <span class='op'>=</span> <span class='va'>Name</span>, original_Name_base <span class='op'>=</span> <span class='va'>Name_base</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>matches_by_doi</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 9656</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># matches_by_doi %&gt;% filter(original_name == Name_base)</span></span>
<span><span class='co'># matches_by_doi %&gt;% filter(original_name != Name_base) %&gt;% View()</span></span>
<span><span class='co'># matches_by_doi %&gt;% filter(original_name != Name_base) %&gt;% filter(str_detect(Name_base, " for "), str_match(Name_base, "^(.+) for .+$")[,2] == original_name) %&gt;% pull(Name_base) %&gt;% str_extract(" for .+$") %&gt;% table() %&gt;% sort() %&gt;% names() %&gt;% dput() </span></span>
<span></span>
<span><span class='va'>unmatched_by_name</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>original_DOI</span><span class='op'>)</span>, <span class='va'>test_type</span> <span class='op'>!=</span> <span class='st'>"Original"</span> <span class='op'>|</span> <span class='va'>Name</span> <span class='op'>!=</span> <span class='va'>Name_base</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>test_type</span>, <span class='va'>DOI</span>, Name <span class='op'>=</span> <span class='va'>Name_base</span>, NameOC_1 <span class='op'>=</span> <span class='va'>NameOC</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>anti_join</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span><span class='op'>)</span> </span>
<span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>unmatched_by_name</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 10021</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>matches_by_name</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>filter</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>!=</span> <span class='st'>"Original"</span> <span class='op'>|</span> <span class='va'>Name</span> <span class='op'>!=</span> <span class='va'>Name_base</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>test_type</span>, <span class='va'>DOI</span>, Name <span class='op'>=</span> <span class='va'>Name_base</span>, NameOC_1 <span class='op'>=</span> <span class='va'>NameOC</span>, <span class='va'>original_DOI</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>               <span class='fu'>select</span><span class='op'>(</span>original_DOI_by_name <span class='op'>=</span> <span class='va'>DOI</span>, <span class='va'>Name</span>, <span class='va'>NameOC</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>same_name_n <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='st'>"Name"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>               <span class='fu'>select</span><span class='op'>(</span>original_DOI <span class='op'>=</span> <span class='va'>DOI</span>, <span class='va'>Name</span>, NameOC_by_doi <span class='op'>=</span> <span class='va'>NameOC</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='st'>"original_DOI"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>matches_by_name</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>original_DOI</span> <span class='op'>==</span> <span class='va'>original_DOI_by_name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>summarise</span><span class='op'>(</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code># A tibble: 3 × 2
  `original_DOI == original_DOI_by_name` `n()`
  &lt;lgl&gt;                                  &lt;int&gt;
1 FALSE                                    591
2 TRUE                                    5049
3 NA                                      1996</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># mismatches are mostly brE/amE equivalents and confusions between scale/measure/instrument and plural/singular</span></span>
<span><span class='co'># matches_by_name %&gt;% filter(original_DOI != original_DOI_by_name, NameOC != NameOC_by_doi) %&gt;% </span></span>
<span><span class='co'>#   select(NameOC_1, NameOC, NameOC_by_doi, same_name_n) %&gt;% </span></span>
<span><span class='co'>#   View()</span></span>
<span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>original_DOI</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 9659</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>==</span> <span class='st'>"Original"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>               <span class='fu'>select</span><span class='op'>(</span>original_DOI_by_name <span class='op'>=</span> <span class='va'>DOI</span>, <span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>filter</span><span class='op'>(</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Name_base"</span> <span class='op'>=</span> <span class='st'>"Name"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>original_DOI_combined <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>original_DOI</span>, </span>
<span>                                          <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>test_type</span> <span class='op'>!=</span> <span class='st'>"Original"</span> <span class='op'>&amp;</span></span>
<span>                                                    <span class='va'>Name</span> <span class='op'>!=</span> <span class='va'>Name_base</span>, <span class='va'>original_DOI_by_name</span>, <span class='cn'>NA_character_</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>original_DOI_combined</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>original_DOI</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>[1] 907</code></pre>
</div>
<h2 id="index-terms">Index terms</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>index_terms</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>IndexTermList</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>index_terms</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>index_terms
                        Emotional States 
                                     798 
                         Eating Behavior 
                                     803 
                  Online Social Networks 
                                     804 
                              Caregivers 
                                     809 
                   Psychosexual Behavior 
                                     823 
                         Quality of Life 
                                     841 
                         Adult Attitudes 
                                     855 
                    Cognitive Assessment 
                                     856 
                                Emotions 
                                     857 
                         Health Behavior 
                                     859 
                      Social Interaction 
                                     860 
                                    Task 
                                     866 
                Employee Characteristics 
                                     867 
                            Expectations 
                                     887 
                 Chinese Cultural Groups 
                                     890 
                  Adolescent Development 
                                     892 
                              Well Being 
                                     903 
                 Professional Competence 
                                     909 
                    Behavioral Intention 
                                     931 
                        Family Relations 
                                     935 
    Mental Health and Illness Assessment 
                                     942 
                    Emotional Assessment 
                                     951 
                                  Nurses 
                                     969 
                       Teacher Attitudes 
                                     972 
                        Health Knowledge 
                                     975 
                     Emotional Responses 
                                     983 
                         Knowledge Level 
                                     988 
                       Social Perception 
                                    1000 
                        Health Attitudes 
                                    1011 
                            Self-Concept 
                                    1017 
                   Childhood Development 
                                    1044 
                      Criterion Validity 
                                    1057 
                             Inventories 
                                    1073 
               Interpersonal Interaction 
                                    1077 
                      Working Conditions 
                                    1087 
                   Professional Measures 
                                    1128 
                        Consumer Surveys 
                                    1130 
                         Decision Making 
                                    1148 
                      Personality Traits 
                                    1157 
                                Symptoms 
                                    1172 
                           Likert Scales 
                                    1183 
                 Student Characteristics 
                                    1187 
                  Parent Child Relations 
                                    1192 
                      Parental Attitudes 
                                    1226 
                       Consumer Behavior 
                                    1227 
                        Major Depression 
                                    1238 
                              Interviews 
                                    1242 
                 Organizational Behavior 
                                    1243 
                         Coping Behavior 
                                    1246 
                     Predictive Validity 
                                    1256 
                              Motivation 
                                    1288 
  Treatment Process and Outcome Measures 
                                    1311 
                         Screening Tests 
                                    1345 
                                 Anxiety 
                                    1408 
              Health Personnel Attitudes 
                                    1422 
                                 Surveys 
                                    1436 
             Interpersonal Relationships 
                                    1458 
                   Therapeutic Processes 
                                    1480 
                        College Students 
                                    1524 
           Family and Parenting Measures 
                                    1530 
              Stress and Coping Measures 
                                    1562 
                    Adolescent Attitudes 
                                    1578 
                  Developmental Measures 
                                    1604 
                Psychological Assessment 
                                    1650 
                          Social Support 
                                    1663 
                        Client Attitudes 
                                    1710 
                      Consumer Attitudes 
                                    1769 
                  Interrater Reliability 
                                    1839 
                     Concurrent Validity 
                                    1906 
                           Self-Efficacy 
                                    1917 
              Physical Health Assessment 
                                    1971 
                           Face Validity 
                                    2023 
                      Employee Attitudes 
                                    2050 
                           Test Revision 
                                    2335 
                        Content Validity 
                                    2568 
             Exploratory Factor Analysis 
                                    2850 
                       Student Attitudes 
                                    2867 
       Social and Interpersonal Measures 
                                    3445 
                    Personality Measures 
                                    3450 
Organizational and Occupational Measures 
                                    3637 
          Cross Cultural Test Adaptation 
                                    3698 
            Confirmatory Factor Analysis 
                                    3865 
                 Educational Measurement 
                                    4102 
                 Test-Retest Reliability 
                                    4155 
                   Discriminant Validity 
                                    4627 
            Foreign Language Translation 
                                    4785 
                             Measurement 
                                    5134 
                     Convergent Validity 
                                    5283 
                             Self-Report 
                                    5366 
                      Construct Validity 
                                    5541 
                          Questionnaires 
                                    5840 
                              Test Forms 
                                    6126 
                       Attitude Measures 
                                    7679 
                           Rating Scales 
                                    9925 
                         Factor Analysis 
                                   11218 
                        Factor Structure 
                                   13938 
                           Test Validity 
                                   20244 
                    Internal Consistency 
                                   27956 
                        Test Reliability 
                                   36555 
                       Test Construction 
                                   50597 </code></pre>
</div>
<h2 id="subdisciplines">Subdisciplines</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>classifications</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_tsv</a></span><span class='op'>(</span>col_names <span class='op'>=</span> <span class='cn'>T</span>,</span>
<span><span class='st'>"code  classification</span></span>
<span><span class='st'>5000  Addiction, Gambling, and Substance Abuse/Use</span></span>
<span><span class='st'>5100  Anxiety and Depression</span></span>
<span><span class='st'>5200  Aptitude and Achievement</span></span>
<span><span class='st'>5300  Attitudes, Interests, Values, and Expectancies</span></span>
<span><span class='st'>5400  Cognitive Processes, Memory, and Decision Making</span></span>
<span><span class='st'>5500  Communication, Language, and Verbal Processing</span></span>
<span><span class='st'>5600  Consumer Behavior, Marketing, and Advertising</span></span>
<span><span class='st'>5700  Culture, Racial, and Ethnic Identity</span></span>
<span><span class='st'>5800  Development and Aging</span></span>
<span><span class='st'>5900  Education, Teaching, and Student Characteristics</span></span>
<span><span class='st'>6000  Emotional States, Emotional Responses, and Motivation</span></span>
<span><span class='st'>6100  Family Relationships and Parenting</span></span>
<span><span class='st'>6200  Functional Status and Adaptive Behavior</span></span>
<span><span class='st'>6300  Human Factors and Environmental Engineering</span></span>
<span><span class='st'>6400  Human-Computer Interaction</span></span>
<span><span class='st'>6500  Intelligence</span></span>
<span><span class='st'>6600  Legal and Forensic Evaluation</span></span>
<span><span class='st'>6700  Mental Health/Illness Related Assessment</span></span>
<span><span class='st'>6800  Military Personnel, Adjustment, and Training</span></span>
<span><span class='st'>6900  Neuropsychological Assessment</span></span>
<span><span class='st'>7000  Organizational, Occupational, and Career Development</span></span>
<span><span class='st'>7100  Perceptual, Motor, and Sensory Processing</span></span>
<span><span class='st'>7200  Personality</span></span>
<span><span class='st'>7300  Physical Health/Illness Related Assessment</span></span>
<span><span class='st'>7400  Religious and Political Beliefs</span></span>
<span><span class='st'>7500  Sex, Gender Roles, and Sexual Behavior</span></span>
<span><span class='st'>7600  Social, Group, and Interpersonal Relationships</span></span>
<span><span class='st'>7700  Sports, Recreation, and Leisure</span></span>
<span><span class='st'>7800  Trauma, Stress, and Coping</span></span>
<span><span class='st'>7900  Treatment, Rehabilitation, and Therapeutic Processes</span></span>
<span><span class='st'>8000  General Assessment Tools"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>higher_class</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_tsv</a></span><span class='op'>(</span><span class='st'>"classification  subdiscipline</span></span>
<span><span class='st'>Addiction, Gambling, and Substance Abuse/Use  Health and Clinical Psychology</span></span>
<span><span class='st'>Anxiety and Depression  Health and Clinical Psychology</span></span>
<span><span class='st'>Aptitude and Achievement  Educational and Developmental Psychology</span></span>
<span><span class='st'>Attitudes, Interests, Values, and Expectancies  Personality and Social Psychology</span></span>
<span><span class='st'>Cognitive Processes, Memory, and Decision Making  Cognitive Psychology</span></span>
<span><span class='st'>Communication, Language, and Verbal Processing  Cognitive Psychology</span></span>
<span><span class='st'>Consumer Behavior, Marketing, and Advertising  Industrial/Organizational Psychology</span></span>
<span><span class='st'>Culture, Racial, and Ethnic Identity  Personality and Social Psychology</span></span>
<span><span class='st'>Development and Aging  Educational and Developmental Psychology</span></span>
<span><span class='st'>Education, Teaching, and Student Characteristics  Educational and Developmental Psychology</span></span>
<span><span class='st'>Emotional States, Emotional Responses, and Motivation  Personality and Social Psychology</span></span>
<span><span class='st'>Family Relationships and Parenting  Personality and Social Psychology</span></span>
<span><span class='st'>Functional Status and Adaptive Behavior  Health and Clinical Psychology</span></span>
<span><span class='st'>Human Factors and Environmental Engineering  Industrial/Organizational Psychology</span></span>
<span><span class='st'>Human-Computer Interaction  Industrial/Organizational Psychology</span></span>
<span><span class='st'>Intelligence  Educational and Developmental Psychology</span></span>
<span><span class='st'>Legal and Forensic Evaluation  Health and Clinical Psychology</span></span>
<span><span class='st'>Mental Health/Illness Related Assessment  Health and Clinical Psychology</span></span>
<span><span class='st'>Military Personnel, Adjustment, and Training  Health and Clinical Psychology</span></span>
<span><span class='st'>Neuropsychological Assessment  Health and Clinical Psychology</span></span>
<span><span class='st'>Organizational, Occupational, and Career Development  Industrial/Organizational Psychology</span></span>
<span><span class='st'>Perceptual, Motor, and Sensory Processing  Cognitive Psychology</span></span>
<span><span class='st'>Personality  Personality and Social Psychology</span></span>
<span><span class='st'>Physical Health/Illness Related Assessment  Health and Clinical Psychology</span></span>
<span><span class='st'>Religious and Political Beliefs  Personality and Social Psychology</span></span>
<span><span class='st'>Sex, Gender Roles, and Sexual Behavior  Personality and Social Psychology</span></span>
<span><span class='st'>Social, Group, and Interpersonal Relationships  Personality and Social Psychology</span></span>
<span><span class='st'>Sports, Recreation, and Leisure  Personality and Social Psychology</span></span>
<span><span class='st'>Trauma, Stress, and Coping  Health and Clinical Psychology</span></span>
<span><span class='st'>Treatment, Rehabilitation, and Therapeutic Processes  Health and Clinical Psychology</span></span>
<span><span class='st'>General Assessment Tools  Health and Clinical Psychology"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>classifications</span> <span class='op'>&lt;-</span> <span class='va'>classifications</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>higher_class</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>records_wide</span> <span class='op'>&lt;-</span> <span class='va'>records_wide</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>higher_class</span> <span class='op'>%&gt;%</span> <span class='fu'>rename</span><span class='op'>(</span>subdiscipline_1 <span class='op'>=</span> <span class='va'>subdiscipline</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classification_1"</span> <span class='op'>=</span> <span class='st'>"classification"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>higher_class</span> <span class='op'>%&gt;%</span> <span class='fu'>rename</span><span class='op'>(</span>subdiscipline_2 <span class='op'>=</span> <span class='va'>subdiscipline</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classification_2"</span> <span class='op'>=</span> <span class='st'>"classification"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>records_wide</span><span class='op'>$</span><span class='va'>subdiscipline_1</span> <span class='op'>==</span> <span class='va'>records_wide</span><span class='op'>$</span><span class='va'>subdiscipline_2</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>
FALSE  TRUE 
 2901  1414 </code></pre>
</div>
<h2 id="save">Save</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>saveRDS</a></span><span class='op'>(</span><span class='va'>records_wide</span>, <span class='st'>"../sober_rubric/raw_data/preprocessed_records.rds"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
